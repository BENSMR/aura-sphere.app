# Firebase Functions Environment Variables
# Copy this file to .env.production and fill in your actual values
# DO NOT commit .env.production to version control

# ============================================================================
# SENDGRID EMAIL CONFIGURATION (Recommended)
# ============================================================================
# Get your API key from: https://sendgrid.com/
# 1. Create account at sendgrid.com
# 2. Go to Settings → API Keys
# 3. Create new key (copy full key starting with SG.)
# 4. Verify your sender email: Settings → Sender Verification

SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
EMAIL_FROM=billing@aurasphere.com
EMAIL_FROM_NAME=AuraSphere Pro

# ============================================================================
# FIREBASE CONFIGURATION (Required)
# ============================================================================
# Get from: https://console.firebase.google.com
# Project Settings → General tab

FIREBASE_PROJECT_ID=your-project-id
FIREBASE_DATABASE_URL=https://your-project.firebaseio.com

# Optional: For file uploads to Cloud Storage
FIREBASE_STORAGE_BUCKET=your-project.appspot.com

# ============================================================================
# STRIPE CONFIGURATION (For payment processing)
# ============================================================================
# Get from: https://dashboard.stripe.com/apikeys
# WARNING: Use test keys (sk_test_...) for development
# WARNING: Use live keys (sk_live_...) ONLY for production
# WARNING: NEVER commit actual keys to version control

STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================================
# OPENAI CONFIGURATION (For AI features)
# ============================================================================
# Get from: https://platform.openai.com/api-keys

OPENAI_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================================
# GOOGLE CLOUD CONFIGURATION
# ============================================================================
# Get from: Google Cloud Console

GOOGLE_PROJECT_ID=your-gcp-project

# ============================================================================
# AUDIT ARCHIVAL & ENCRYPTION
# ============================================================================
# Configure audit trail archival to Cloud Storage

# Google Cloud Storage bucket for audit archives
# Must be created in your GCP project
ARCHIVE_BUCKET=your-gcs-bucket-name

# How many days to keep audit entries in Firestore before archiving
# Entries older than this are moved to Cloud Storage
# Typical: 90, 180, 365 days
ARCHIVE_RETENTION_DAYS=365

# Batch size for archival operations (how many entries to archive at once)
ARCHIVE_BATCH_SIZE=1000

# Encryption key for audit archives (base64-encoded 32-byte key)
# Generate with: openssl rand -base64 32
# If set, archived files are encrypted at rest
# If empty, Google Cloud Storage default encryption is used
ENCRYPTION_KEY_BASE64=

# Google Cloud KMS key for encryption (optional if using ENCRYPTION_KEY_BASE64)
# Format: projects/{PROJECT_ID}/locations/{LOCATION}/keyRings/{RING}/cryptoKeys/{KEY}
KMS_KEY_ID=

# ============================================================================
# NOTIFICATIONS
# ============================================================================

# Slack webhook URL for audit alerts and admin notifications
# Get from: Slack workspace → Apps → Incoming Webhooks
# Format: https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXX
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/

# Send Slack notifications on critical events
SLACK_NOTIFY_ADMIN_CHANGES=true
SLACK_NOTIFY_HIGH_VALUE=true
SLACK_NOTIFY_ERRORS=true

# High-value threshold (in base currency, e.g., USD)
# Transactions above this trigger Slack notification
HIGH_VALUE_THRESHOLD=5000

# ============================================================================
# SIGNED URLS
# ============================================================================

# How long signed URLs are valid (in seconds)
# Users can view archived audit entries via signed URL for this duration
# Default: 3600 (1 hour)
SIGNED_URL_EXPIRATION_SECONDS=3600

# ============================================================================
# AURASPHERE REWARDS SYSTEM
# ============================================================================
# Configure token rewards

WELCOME_BONUS=200
DAILY_LOGIN=5

# ============================================================================
# ANOMALY DETECTION & SCANNING
# ============================================================================

# Time window for anomaly scans (in hours)
# Scanner analyzes data from the last X hours
# Default: 72 (3 days)
ANOMALY_WINDOW_HOURS=72

# Maximum documents to scan per collection per scan run
# Prevents scanning from consuming too many resources
# Default: 500
ANOMALY_MAX_DOCS_PER_COLLECTION=500

# Slack alert threshold (numeric severity level)
# Anomalies at or above this level trigger Slack notifications
# 0=low, 1=medium, 2=high, 3=critical
# Default: 2 (only high and critical)
ANOMALY_SLACK_THRESHOLD=2

# Enable debug logging for anomaly scanner
# true to see detailed logs about what's being scanned
# Default: false
ANOMALY_DEBUG=false

# ============================================================================
# ADMIN & SECURITY
# ============================================================================

# Setup code for initial admin creation (setFirstAdmin endpoint)
# Should be a strong random string - only used during initial setup
SETUP_CODE=your_secure_random_setup_code_here

# ============================================================================
# ENVIRONMENT
# ============================================================================
# Use: development, staging, or production

NODE_ENV=production

# ============================================================================
# OPTIONAL: ALTERNATIVE EMAIL CONFIGURATION (Gmail SMTP)
# ============================================================================
# Use this if not using SendGrid (not recommended for production)
# Comment out SENDGRID settings above if using Gmail

# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USER=your-email@gmail.com
# MAIL_PASS=your-app-specific-password
# MAIL_FROM=your-email@gmail.com
